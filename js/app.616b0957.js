(function(){"use strict";var e={6796:function(e,t,o){var n=o(7764),a=o(4108);const i={class:"mainWrapper"},s={class:"wrap"},l=(0,a.QD)("aside",{class:"leftAside"},null,-1),r={class:"wrap_section"},d={class:"wrapTable"};function u(e,t,o,n,u,c){const w=(0,a.E1)("BurgerMenu"),m=(0,a.E1)("LinksMenu"),h=(0,a.E1)("NewRowAdder"),D=(0,a.E1)("RedactTable"),g=(0,a.E1)("AgGridVue"),v=(0,a.E1)("MobileBlock"),f=(0,a.E1)("ResultBlock");return(0,a.Wz)(),(0,a.An)("div",i,[(0,a.QD)("div",s,[l,(0,a.QD)("section",r,[(0,a.K2)(w),(0,a.K2)(m),(0,a.K2)(h,{onAddNewRow:c.addNewRow},null,8,["onAddNewRow"]),(0,a.QD)("div",d,[(0,a.K2)(D,{listMenu:u.listMenu,onSendDataToServer:c.sendDataToServer,onOnGridReady:c.onGridReady,onOnRowDataShower:c.onRowDataShower},null,8,["listMenu","onSendDataToServer","onOnGridReady","onOnRowDataShower"]),(0,a.K2)(g,{class:"ag-theme-quartz",style:{"min-width":"max-content"},rowData:u.rowData,columnDefs:u.listMenu[0].listColumns,suppressRowTransform:!0,rowDragManaged:!0,onGridReady:c.onGridReady,editable:!0,enableCellChangeFlash:!0,onVisibleChanged:c.onRowDataShower,onRowDragEnd:c.onRowDragEnd,onCellValueChanged:c.onCellValueChanged},null,8,["rowData","columnDefs","onGridReady","onVisibleChanged","onRowDragEnd","onCellValueChanged"]),(0,a.K2)(v,{rowData:u.rowData,options:u.options,onDelRow:c.delRow},null,8,["rowData","options","onDelRow"]),(0,a.K2)(f,{rowData:u.rowData},null,8,["rowData"])])])])])}o(3248);var c=o(2964),w=o(4036),m=o(9096),h=o.p+"img/burger.9f5bdf22.svg",D=o.p+"img/Combined Shape2.85dfdcb9.svg";const g={class:"mobileBlock"},v=["onDragstart","onDrop","onDragenter"],f={class:"mobileBlockNumber"},p=(0,a.QD)("h6",{class:""},"Номер строки",-1),b=(0,a.QD)("button",{class:"burgerButton"},[(0,a.QD)("img",{src:h,alt:"burgerImg"})],-1),k=["onClick"],R=(0,a.QD)("h6",null,"Действие",-1),C=(0,a.QD)("button",{class:"burgerButton burgerButton_colorBlue"},[(0,a.QD)("img",{src:D,alt:"burgerImg"})],-1),Q={class:"windowDoing"},A=["onClick"],y={class:"mobileBlockRow"},x=(0,a.QD)("h6",null,"Наименование единицы",-1),B=["onUpdate:modelValue"],W=["selected"],E={class:"mobileBlockRow"},M=(0,a.QD)("h6",null,"Цена",-1),S=["onUpdate:modelValue"],L={class:"mobileBlockRow"},I=(0,a.QD)("h6",null,"Кол-во",-1),O=["onUpdate:modelValue"],T={class:"mobileBlockRow"},_=(0,a.QD)("h6",null,"Наименование товара",-1),z=["value"],G={class:"mobileBlockRow"},N=(0,a.QD)("h6",null,"Итого",-1),V=["value"];function j(e,t,o,i,s,l){return(0,a.Wz)(),(0,a.An)("div",g,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(o.rowData,((e,i)=>((0,a.Wz)(),(0,a.An)("div",{key:e.id,class:"mobileBlockItem",onDragstart:t=>l.onDragStart(t,e.id),draggable:"true",onDrop:t=>l.onDrop(t,e.id),onDragenter:t=>l.onDragEnter(t,e.id),onDragover:t[0]||(t[0]=(0,n.Y7)((()=>{}),["prevent"])),ref_for:!0,ref:"rows"},[(0,a.QD)("div",f,[p,b,(0,a.mY)(" "+(0,m.WA)(i+1),1)]),(0,a.QD)("div",{class:"mobileBlockDoing mobileBlockNumber",onClick:t=>l.handlerWindowDoing(e)},[R,C,(0,a.wt)((0,a.QD)("div",Q,[(0,a.QD)("button",{onClick:t=>l.delRow(e.id)},"Удалить",8,A)],512),[[n.Ub,e.doing]])],8,k),(0,a.QD)("div",y,[x,(0,a.wt)((0,a.QD)("select",{"onUpdate:modelValue":t=>e["Наименование единицы"]=t,class:"mobileBlockRow_select"},[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(o.options,((t,o)=>((0,a.Wz)(),(0,a.An)("option",{key:o,selected:t===e["Наименование единицы"]},(0,m.WA)(t),9,W)))),128))],8,B),[[n.Ip,e["Наименование единицы"]]])]),(0,a.QD)("div",E,[M,(0,a.wt)((0,a.QD)("input",{type:"number","onUpdate:modelValue":t=>e["Цена"]=t,class:"mobileBlockRow_select"},null,8,S),[[n.Og,e["Цена"]]])]),(0,a.QD)("div",L,[I,(0,a.wt)((0,a.QD)("input",{type:"number","onUpdate:modelValue":t=>e["Кол-во"]=t,class:"mobileBlockRow_select"},null,8,O),[[n.Og,e["Кол-во"]]])]),(0,a.QD)("div",T,[_,(0,a.QD)("input",{type:"text",value:e["Название товара"],readonly:"",class:"mobileBlockRow_select"},null,8,z)]),(0,a.QD)("div",G,[N,(0,a.QD)("input",{type:"number",value:l.getSummCost(e),readonly:"",class:"mobileBlockRow_select"},null,8,V)])],40,v)))),128))])}var U={name:"MobileBlock",props:["rowData","options"],emits:["delRow"],methods:{getSummCost(e){return e["Цена"]*e["Кол-во"]},onDragEnter(e){e.preventDefault(),"mobileBlockItem"===e.target.classList.value&&(this.$refs.rows.forEach((e=>{"mobileBlockItem active"==e.classList&&e.classList.remove("active")})),e.target.classList.add("active"));let t=e.target.children;for(var o=0;o<t.length;o++)return},onDrop(e,t){this.$refs.rows.forEach((e=>{"mobileBlockItem active"==e.classList&&e.classList.remove("active")}));const o=this.rowData.findIndex((t=>t.id==e.dataTransfer.getData("itemId"))),n=this.rowData.findIndex((e=>e.id===t));[this.rowData[o],this.rowData[n]]=[this.rowData[n],this.rowData[o]]},onDragStart(e,t){e.dataTransfer.drpEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemId",t)},handlerWindowDoing(e){e.doing=!e.doing},delRow(e){this.$emit("delRow",e)}},mounted(){return this.rowData},updated(){return this.rowData}},K=o(4100);const P=(0,K.c)(U,[["render",j]]);var F=P,$=o.p+"img/combined-shape.a2789520.svg";const Y={class:"redactTable"},q={class:"links_rightGroup"},H=(0,a.QD)("img",{src:$,alt:"settingsIcon"},null,-1),J=[H],X={class:"listOptions"},Z={class:"wrapButtonColumnMenu"},ee=["onClick"],te={key:0},oe={key:1},ne={key:0,class:"listColumn"},ae=["onChange"],ie={for:" idx"};function se(e,t,o,i,s,l){return(0,a.Wz)(),(0,a.An)("div",Y,[(0,a.QD)("div",null,[(0,a.QD)("button",{class:"buttonsWithoutBorder",onClick:t[0]||(t[0]=t=>e.$emit("sendDataToServer"))},"Сохранить изменения")]),(0,a.QD)("div",q,[(0,a.QD)("button",{onClick:t[1]||(t[1]=()=>this.showList=!this.showList),class:"buttonMenu"},J),(0,a.wt)((0,a.QD)("div",X,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(o.listMenu,((t,o)=>((0,a.Wz)(),(0,a.An)("button",{class:"buttonColumnMenu",key:o},[(0,a.QD)("div",Z,[(0,a.QD)("button",{onClick:e=>t.showListColumns=!t.showListColumns,class:"buttonColumnMenu"},[(0,a.mY)((0,m.WA)(t.name)+" ",1),t.showListColumns?((0,a.Wz)(),(0,a.An)("div",oe," <")):((0,a.Wz)(),(0,a.An)("div",te,">"))],8,ee),t.showListColumns&&t.listColumns.length>0?((0,a.Wz)(),(0,a.An)("div",ne,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(t.listColumns,(t=>((0,a.Wz)(),(0,a.An)("div",{key:t.field},[(0,a.QD)("input",{type:"checkbox",id:"idx",onChange:o=>e.$emit("onRowDataShower",t.field),checked:"true"},null,40,ae),(0,a.mY)("   "),(0,a.QD)("label",ie,(0,m.WA)(t.field),1)])))),128))])):(0,a.g1)("",!0)])])))),128))],512),[[n.Ub,s.showList]])])])}var le={name:"RedactTable",data(){return{showList:!1,showListNewColumns:!1}},props:["listMenu","columnDefs"],emits:["onRowDataShower","onGridReady"]};const re=(0,K.c)(le,[["render",se]]);var de=re;const ue={class:"newRow"},ce=(0,a.QD)("span",{class:"plus"},"+",-1);function we(e,t,o,n,i,s){return(0,a.Wz)(),(0,a.An)("div",ue,[(0,a.QD)("button",{class:"adderRow",onClick:t[0]||(t[0]=t=>e.$emit("addNewRow"))},[ce,(0,a.mY)(" Добавить строку")])])}var me={name:"NewRowAdder",emits:["addNewRow"]};const he=(0,K.c)(me,[["render",we]]);var De=he;const ge={class:"links"},ve=(0,a.IL)('<div class="links_leftGroup"><a href="#">Общее</a><a class="links_leftGroup__secondLink" href="#">Товары</a><a href="#">Доп. расходы</a></div><div class="links_rightGroup"><button class="buttonMenu"><img src="'+$+'" alt="settingsIcon"></button></div>',2),fe=[ve];function pe(e,t,o,n,i,s){return(0,a.Wz)(),(0,a.An)("div",ge,fe)}var be={name:"LinksMenu"};const ke=(0,K.c)(be,[["render",pe]]);var Re=ke;const Ce={class:"burger"},Qe=(0,a.QD)("button",null,[(0,a.QD)("img",{src:h,alt:"burgerImg"})],-1),Ae=(0,a.QD)("h1",{class:"title"},"Проведение ТО и мелкий ремонт",-1),ye=[Qe,Ae];function xe(e,t,o,n,i,s){return(0,a.Wz)(),(0,a.An)("div",Ce,ye)}var Be={name:"BurgerMenu"};const We=(0,K.c)(Be,[["render",xe]]);var Ee=We;const Me={class:"wrapResult"},Se={class:"wrapResult_right"},Le={class:"preResult"},Ie={class:"rowForSumm"},Oe=(0,a.QD)("div",null," Сумма: ",-1),Te={class:"rowForSumm"},_e=(0,a.QD)("div",null," Кол-во: ",-1),ze={class:"rowForSumm"},Ge=(0,a.QD)("div",null," Общий вес: ",-1),Ne={class:"preResult"},Ve={class:"rowForSumm summ"},je=(0,a.QD)("div",null," Общая сумма: ",-1);function Ue(e,t,o,n,i,s){return(0,a.Wz)(),(0,a.An)("div",Me,[(0,a.QD)("div",Se,[(0,a.QD)("div",Le,[(0,a.QD)("div",Ie,[Oe,(0,a.QD)("div",null,(0,m.WA)(s.summCosts),1)]),(0,a.QD)("div",Te,[_e,(0,a.QD)("div",null,(0,m.WA)(s.summPoints),1)]),(0,a.QD)("div",ze,[Ge,(0,a.QD)("div",null,(0,m.WA)(s.summWeights),1)])]),(0,a.QD)("div",Ne,[(0,a.QD)("div",Ve,[je,(0,a.QD)("div",null,(0,m.WA)(s.summCosts),1)])])])])}var Ke={name:"ResultBlock",props:["rowData"],computed:{summCosts(){return this.rowData?this.rowData.reduce(((e,t)=>e+t["Кол-во"]*t["Цена"]),0):0},summPoints(){return this.rowData?this.rowData.reduce(((e,t)=>e+t["Кол-во"]),0):0},summWeights(){return this.rowData?this.rowData.reduce(((e,t)=>e+ +t["Наименование единицы"].match(/\d+кг/i)[0].match(/\d+/i)*t["Кол-во"]),0):0}}};const Pe=(0,K.c)(Ke,[["render",Ue]]);var Fe=Pe,$e={name:"App",data(){return{listMenu:[{name:"Отображение столбцов ",listColumns:[]},{name:"Порядок столбцов ",showListColumns:!1,listColumns:[]}],rowData:null,options:["Мраморный щебень фр. 30 мм, 40кг","Мраморный щебень фр. 2-5 мм, 25кг","Мраморный щебень фр. 4-8 мм, 10кг","Мраморный щебень фр. 3-10 мм, 15кг"]}},components:{AgGridVue:w.e,MobileBlock:F,RedactTable:de,NewRowAdder:De,LinksMenu:Re,BurgerMenu:Ee,ResultBlock:Fe},methods:{addNewRow(){this.rowData.push({id:this.rowData.length+1,index:""," ":"","Наименование единицы":this.options[0],"Цена":1231,"Кол-во":12,"Название товара":"Мраморный щебень","Итого":"",doing:!1}),this.rowData=[...this.rowData]},onGridReady(e){this.gridApi=e.api},onRowDataShower(e){const t=this.listMenu[0].listColumns.find((t=>t.field==e));t.hide=!t.hide,this.gridApi.setColumnDefs(this.listMenu[0].listColumns)},onRowDragEnd(){const e=this.listMenu[0].listColumns.map(((e,t)=>e.index=t));this.gridApi.setColumnDefs([...this.listMenu[0].listColumns],e)},sendDataToServer(){const e={key:"value"};c.c.post("...",e).then((e=>{console.log(e.data)})).catch((e=>{console.error(e)}))},delRow(e){const t=this.rowData.findIndex((t=>t.id===e));return this.rowData.splice(t,1),this.rowData=[...this.rowData]},onCellValueChanged(){this.rowData=[...this.rowData]}},mounted(){const e=window.matchMedia("(max-width: 600px)");e.addEventListener("change",(()=>this.rowData=[...this.rowData])),this.listMenu[0].listColumns=[{field:"Индекс",hide:!1,headerName:"",width:70,rowDrag:!0,editable:!1,valueGetter:e=>e.node.rowIndex+1},{field:"Наименование единицы",editable:!0,filter:!1,sortable:!1,cellEditor:"agSelectCellEditor",flex:2,hide:!1,singleClickEdit:!0,onCellValueChanged:e=>{switch(e.data["Наименование единицы"]){case this.options[0]:this.rowData[e.node.rowIndex]["Цена"]=1231;break;case this.options[1]:this.rowData[e.node.rowIndex]["Цена"]=1500;break;case this.options[2]:this.rowData[e.node.rowIndex]["Цена"]=1e3;break;case this.options[3]:this.rowData[e.node.rowIndex]["Цена"]=860;break}return this.rowData=[...this.rowData]},valueGetter:e=>e.data["Наименование единицы"],cellEditorParams:{values:[this.options[0],this.options[1],this.options[2],this.options[3]]}},{field:"Цена",editable:!0,cellEditor:"agNumberCellEditor",singleClickEdit:!0,hide:!1,flex:1},{field:"Кол-во",editable:!0,cellEditor:"agNumberCellEditor",singleClickEdit:!0,hide:!1,flex:1},{field:"Название товара",editable:!0,cellEditor:"agTextCellEditor",flex:1.6,hide:!1},{field:"Итого",flex:1,hide:!1,valueGetter:e=>e.data["Итого"]=e.data["Цена"]*e.data["Кол-во"]},{field:"Действие",flex:1,cellRenderer:e=>{let t=document.createElement("button");return t.innerHTML="Del",t.classList.add("buttonOfRows","adderRow"),t.addEventListener("click",(()=>this.delRow(e.data.id))),t}}],this.rowData=[{id:1,index:""," ":"","Наименование единицы":this.options[0],"Цена":1231,"Кол-во":12,"Название товара":"Мраморный щебень","Итого":"",doing:!1},{id:2,index:""," ":"","Наименование единицы":this.options[1],"Цена":1500,"Кол-во":10,"Название товара":"Мраморный щебень","Итого":"",doing:!1},{id:3,index:""," ":"","Наименование единицы":this.options[2],"Цена":1e3,"Кол-во":5,"Название товара":"Мраморный щебень","Итого":"",doing:!1},{id:4,index:""," ":"","Наименование единицы":this.options[3],"Цена":860,"Кол-во":10,"Название товара":"Мраморный щебень","Итого":"",doing:!1}]}};const Ye=(0,K.c)($e,[["render",u]]);var qe=Ye;(0,n.W0)(qe).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,i){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],i=e[u][2];for(var l=!0,r=0;r<n.length;r++)(!1&i||s>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[r])}))?n.splice(r--,1):(l=!1,i<s&&(s=i));if(l){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,a,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/cargo-table/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,s=n[0],l=n[1],r=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(r)var u=r(o)}for(t&&t(n);d<s.length;d++)i=s[d],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self["webpackChunkcargo_table"]=self["webpackChunkcargo_table"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[999],(function(){return o(6796)}));n=o.O(n)})();
//# sourceMappingURL=app.616b0957.js.map